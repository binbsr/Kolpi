@page "/questions"

<RadzenDataGrid Count="@totalItems"
                Data="@questions"
                LoadData="@LoadData"
                GridLines="DataGridGridLines.None"
@ref="questionsGrid"
                AllowColumnResize="true"
                AllowFiltering="true"
                FilterMode="FilterMode.SimpleWithMenu"
                AllowSorting="true"
                PageSize="10"
                AllowPaging="true"
                ShowPagingSummary="true"
                TItem="QuestionViewModel"
                IsLoading="isLoading"
                AllowColumnPicking="true">
    <HeaderTemplate>
        <RadzenButton ButtonStyle="ButtonStyle.Info" Icon="add_circle_outline" Text="Add Question" Click="AddNewQuestion" />
    </HeaderTemplate>
    <Columns>
        <RadzenDataGridColumn TItem="QuestionViewModel" Title="#" Width="50px" Frozen="@true" Filterable="false" TextAlign="TextAlign.Center">
            <Template Context="question">
                @(questions.IndexOf(question) + 1)
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="QuestionViewModel" Title="Question">
            <Template Context="question">
                @((MarkupString)question.Body)
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="QuestionViewModel" Property="Type" Title="Type" />
        <RadzenDataGridColumn TItem="QuestionViewModel" Title="Tags">
            <Template Context="question">
                @foreach (var tag in question.Tags)
                {
                    <RadzenBadge BadgeStyle="BadgeStyle.Light" Text=@tag.Name />
                }
            </Template>
            <FilterTemplate>
                <RadzenDropDown 
                    @bind-Value=@selectedTags 
                    Style="width:100%"
                    Change=@OnSelectedTagsChange 
                    Data="@(tags)" 
                    AllowClear="true" 
                    Multiple="true" />
            </FilterTemplate>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="QuestionViewModel" Title="Created">
            <Template Context="question">
                @question.Created
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>
