@page "/question/add"

<Editor />

@*
<MudContainer>
    <MudText Typo="Typo.h6">
        Question
        <MudLink Class="" Href="https://katex.org/docs/supported.html" Target="_blank">Katex docs (<i>fx</i>)</MudLink>
    </MudText>
    <Editor />
    <MudGrid>
        @{
            byte i = 1;
        }
        <MudItem md="12" xs="12">
            <MudPaper Elevation="3">
                <MudList>
                    @foreach (var option in answerOptionViewModels)
                    {
                        var optionLabel = "Option " + i++;
                        <MudListItem>
                            <AnsOption AnswerModel="@option" TextInputLabel="@optionLabel" RemoveItemCallback="DeleteAnsOption" />
                        </MudListItem>
                    }
                    <MudListItem>
                        <MudContainer>
                            <MudFab Color="Color.Tertiary" Title="Add new answer option" Icon="@Icons.Material.Filled.Add" Size="Size.Small" OnClick="AddNewOption" />
                        </MudContainer>
                    </MudListItem>

                </MudList>
            </MudPaper>
        </MudItem>

        <MudItem md="12" xs="12">
            <MudChipSet AllClosable="true" OnClose="Closed">
                @foreach (TagViewModel tag in tagsSelected)
                {
                    defaultColors.TryGetValue(tag.TagColorCode ?? string.Empty, out Color color);
                    <MudChip Text="@tag.Name" Color="color"></MudChip>
                }
            </MudChipSet>
        </MudItem>

        <MudItem md="12" xs="12">
            <MudAutocomplete T="TagViewModel"
                             Label="Tagging"
                             SearchFunc="Search"
                             Adornment="Adornment.End"
                             AdornmentIcon="@Icons.Filled.Tag"
                             Dense="true"
                             MinCharacters="2"
                             ToStringFunc="@(e => e == null ? null : $"{e?.Name} ({e?.Details})")"
                             ValueChanged="OnSelectedValueChanged"
                             Placeholder="Start typing for tags...">

                <ItemTemplate Context="e">
                    <MudText><b>@($"{e.Name}")</b>/@($"{e.TagTypeName} ({e.Details})")</MudText>
                    </ItemTemplate>
                    <NoItemsTemplate>
                        <MudText Align="Align.Center" Class="px-4 py-1">
                            No tags found
                        </MudText>
                    </NoItemsTemplate>
                </MudAutocomplete>
            </MudItem>

            <MudItem md="12" xs="12">
                <MudButton Disabled="isSaving"
                           OnClick="OnValidSubmit"
                           Variant="MudBlazor.Variant.Filled"
                           Color="Color.Tertiary"
                           StartIcon="@Icons.Material.Filled.Save"
                           Class="ml-auto">
                    Save Question
                </MudButton>
            </MudItem>
        </MudGrid>

    </MudContainer>

*@