@page "/question/add"
@using Kolpi.ApplicationCore.Enums;

<RadzenHtmlEditor @bind-Value=@Question.Body
                  style="height: 180px;"
                  Change="@OnInput"
                  UploadUrl="upload/image"
                  Placeholder="Your question goes here..."/>

<RadzenRow AlignItems="AlignItems.Center" class="rz-my-2">
    <RadzenColumn SizeMD="10">
        <RadzenDropDown @bind-Value=@tagsSelected TValue="List<TagViewModel>" Data=@Tags Context="tag"
                        Multiple=true
                        AllowClear=true
                        AllowSelectAll=false
                        Placeholder="Click to tag your question"
                        Chips=true
                        Style="width: 100%"                        
                        AllowFiltering=true
                        FilterAsYouType=true
                        FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive
                        FilterOperator="StringFilterOperator.Contains"
                        MaxSelectedLabels="8">
            <Template>
                @tag.Name
            </Template>
        </RadzenDropDown>
    </RadzenColumn>
    <RadzenColumn SizeMD="2">
        <RadzenDropDown Data="@(Enum.GetValues<QuestionType>().Cast<Enum>())" @bind-Value=@Question.Type Style="width:100%;" />
    </RadzenColumn>
</RadzenRow>

@if (Question.Type == QuestionType.Objective)
{
    <RadzenRow class="rz-border-info-lighter rz-p-4" Gap="1rem" RowGap="1rem">
        @{
            char i = 'A';
        }
        @foreach (var option in answerOptionViewModels)
        {
            var optionLabel = "Option " + i++;
            <RadzenColumn SizeMD="6" class="rz-background-color-base-200">
                <AnsOption AnswerModel="@option" TextInputLabel="@optionLabel" RemoveItemCallback="DeleteAnsOption" />
            </RadzenColumn>
        }

        <RadzenButton Icon="add" Text="New Option" ButtonStyle="ButtonStyle.Danger" Click="AddNewOption" title="Add new option" Style="height:20px" />
    </RadzenRow>
}

<RadzenButton Icon="save" Text="Save Question" ButtonStyle="ButtonStyle.Success" IsBusy="isSaving" BusyText="Saving..." Click="OnSave" class="rz-mt-4" Style="float: right" />
